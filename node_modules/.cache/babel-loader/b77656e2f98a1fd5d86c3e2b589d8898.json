{"ast":null,"code":"var _jsxFileName = \"/Users/SWT/Desktop/test_shop_crud_copy/test_shop_crud_methods/src/components/ProductResults/index.js\";\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { fetchProductsStart } from './../../redux/Products/products.actions';\nimport Product from './Product';\nimport FormSelect from './../forms/FormSelect';\nimport LoadMore from './../LoadMore';\nimport './styles.scss';\n\nconst mapState = _ref => {\n  let {\n    productsData\n  } = _ref;\n  return {\n    products: productsData.products\n  };\n};\n\nconst ProductResults = _ref2 => {\n  let {} = _ref2;\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const {\n    filterType\n  } = useParams();\n  const {\n    products\n  } = useSelector(mapState);\n  const {\n    data,\n    queryDoc,\n    isLastPage\n  } = products;\n  useEffect(() => {\n    dispatch(fetchProductsStart({\n      filterType\n    }));\n  }, [filterType]);\n\n  const handleFilter = e => {\n    const nextFilter = e.target.value;\n    history.push(`/search/${nextFilter}`);\n  };\n\n  if (!Array.isArray(data)) return null;\n\n  if (data.length < 1) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"products\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }\n    }, \"No search results.\"));\n  }\n\n  const configFilters = {\n    defaultValue: filterType,\n    options: [{\n      name: 'Show all',\n      value: ''\n    }, {\n      name: 'Mens',\n      value: 'mens'\n    }, {\n      name: 'Womens',\n      value: 'womens'\n    }],\n    handleChange: handleFilter\n  };\n\n  const handleLoadMore = () => {\n    dispatch(fetchProductsStart({\n      filterType,\n      startAfterDoc: queryDoc,\n      persistProducts: data\n    }));\n  };\n\n  const configLoadMore = {\n    onLoadMoreEvt: handleLoadMore\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, \"Browse Products\"), /*#__PURE__*/React.createElement(FormSelect, Object.assign({}, configFilters, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"productResults\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, data.map((product, pos) => {\n    const {\n      productThumbnail,\n      productName,\n      productPrice\n    } = product;\n    if (!productThumbnail || !productName || typeof productPrice === 'undefined') return null;\n    const configProduct = { ...product\n    };\n    return /*#__PURE__*/React.createElement(Product, Object.assign({\n      key: pos\n    }, configProduct, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }));\n  })), !isLastPage && /*#__PURE__*/React.createElement(LoadMore, Object.assign({}, configLoadMore, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default ProductResults;","map":{"version":3,"sources":["/Users/SWT/Desktop/test_shop_crud_copy/test_shop_crud_methods/src/components/ProductResults/index.js"],"names":["React","useEffect","useDispatch","useSelector","useHistory","useParams","fetchProductsStart","Product","FormSelect","LoadMore","mapState","productsData","products","ProductResults","dispatch","history","filterType","data","queryDoc","isLastPage","handleFilter","e","nextFilter","target","value","push","Array","isArray","length","configFilters","defaultValue","options","name","handleChange","handleLoadMore","startAfterDoc","persistProducts","configLoadMore","onLoadMoreEvt","map","product","pos","productThumbnail","productName","productPrice","configProduct"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { fetchProductsStart } from './../../redux/Products/products.actions';\nimport Product from './Product';\nimport FormSelect from './../forms/FormSelect';\nimport LoadMore from './../LoadMore';\nimport './styles.scss';\n\nconst mapState = ({ productsData }) => ({\n  products: productsData.products\n});\n\nconst ProductResults = ({ }) => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const { filterType } = useParams();\n  const { products } = useSelector(mapState);\n\n  const { data, queryDoc, isLastPage } = products;\n\n  useEffect(() => {\n    dispatch(\n      fetchProductsStart({ filterType })\n    )\n  }, [filterType]);\n\n  const handleFilter = (e) => {\n    const nextFilter = e.target.value;\n    history.push(`/search/${nextFilter}`);\n  };\n\n  if (!Array.isArray(data)) return null;\n  if (data.length < 1) {\n    return (\n      <div className=\"products\">\n        <p>\n          No search results.\n        </p>\n      </div>\n    );\n  }\n\n  const configFilters = {\n    defaultValue: filterType,\n    options: [{\n      name: 'Show all',\n      value: ''\n    }, {\n      name: 'Mens',\n      value: 'mens'\n    }, {\n      name: 'Womens',\n      value: 'womens'\n    }],\n    handleChange: handleFilter\n  };\n\n  const handleLoadMore = () => {\n    dispatch(\n      fetchProductsStart({\n        filterType,\n        startAfterDoc: queryDoc,\n        persistProducts: data\n      })\n    )\n  };\n\n  const configLoadMore = {\n    onLoadMoreEvt: handleLoadMore,\n  };\n\n  return (\n    <div className=\"products\">\n\n      <h1>\n        Browse Products\n      </h1>\n\n      <FormSelect {...configFilters} />\n\n      <div className=\"productResults\">\n        {data.map((product, pos) => {\n          const { productThumbnail, productName, productPrice } = product;\n          if (!productThumbnail || !productName ||\n            typeof productPrice === 'undefined') return null;\n\n          const configProduct = {\n            ...product\n          };\n\n          return (\n            <Product key={pos} {...configProduct} />\n          );\n        })}\n      </div>\n\n      {!isLastPage && (\n        <LoadMore {...configLoadMore} />\n      )}\n\n    </div>\n  );\n};\n\nexport default ProductResults;\n"]},"metadata":{},"sourceType":"module"}